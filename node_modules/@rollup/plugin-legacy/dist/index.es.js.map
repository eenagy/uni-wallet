{"version":3,"file":"index.es.js","sources":["../src/index.js"],"sourcesContent":["import { resolve } from 'path';\n\nimport { normalizePath } from '@rollup/pluginutils';\n\nconst validName = /^[a-zA-Z_$][a-zA-Z$_0-9]*$/;\n\nexport default function legacy(options) {\n  const exports = {};\n  Object.keys(options).forEach((file) => {\n    exports[normalizePath(resolve(file))] = options[file];\n  });\n\n  return {\n    name: 'legacy',\n\n    transform(content, id) {\n      const normalizedId = normalizePath(id);\n      if (normalizedId in exports) {\n        let code = content;\n        const value = exports[normalizedId];\n\n        if (typeof value === 'string') {\n          // default export\n          code += `\\nexport default ${value};`;\n        } else {\n          const statements = [];\n          let i = 1;\n\n          Object.entries(value).forEach(([key, name]) => {\n            if (name === key) {\n              statements.push(`export { ${key} };`);\n            } else if (validName.test(name)) {\n              statements.push(`export { ${name} as ${key} };`);\n            } else {\n              statements.push(`var __export${i} = ${name};\\nexport { __export${i} as ${key} };`);\n              i += 1;\n            }\n          });\n\n          code += `\\n${statements.join('\\n')}`;\n        }\n\n        // TODO need a way to say 'sourcemap hasn't changed\n        return {\n          code,\n          map: { mappings: '' }\n        };\n      }\n      return null;\n    }\n  };\n}\n"],"names":["const","let"],"mappings":";;;AAIAA,IAAM,SAAS,GAAG,4BAA4B,CAAC;AAC/C;AACe,SAAS,MAAM,CAAC,OAAO,EAAE;AACxC,EAAEA,IAAM,OAAO,GAAG,EAAE,CAAC;AACrB,EAAE,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,OAAO,WAAE,IAAI,EAAK;AACzC,IAAI,OAAO,CAAC,aAAa,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,OAAO,CAAC,IAAI,CAAC,CAAC;AAC1D,GAAG,CAAC,CAAC;AACL;AACA,EAAE,OAAO;AACT,IAAI,IAAI,EAAE,QAAQ;AAClB;AACA,IAAI,6BAAS,CAAC,OAAO,EAAE,EAAE,EAAE;AAC3B,MAAMA,IAAM,YAAY,GAAG,aAAa,CAAC,EAAE,CAAC,CAAC;AAC7C,MAAM,IAAI,YAAY,IAAI,OAAO,EAAE;AACnC,QAAQC,IAAI,IAAI,GAAG,OAAO,CAAC;AAC3B,QAAQD,IAAM,KAAK,GAAG,OAAO,CAAC,YAAY,CAAC,CAAC;AAC5C;AACA,QAAQ,IAAI,OAAO,KAAK,KAAK,QAAQ,EAAE;AACvC;AACA,UAAU,IAAI,IAAI,sBAAoB,KAAK,MAAG,CAAC;AAC/C,SAAS,MAAM;AACf,UAAUA,IAAM,UAAU,GAAG,EAAE,CAAC;AAChC,UAAUC,IAAI,CAAC,GAAG,CAAC,CAAC;AACpB;AACA,UAAU,MAAM,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,OAAO,cAAa,EAAK;6BAAV;;AAAW;AAC1D,YAAY,IAAI,IAAI,KAAK,GAAG,EAAE;AAC9B,cAAc,UAAU,CAAC,IAAI,gBAAa,GAAG,UAAM,CAAC;AACpD,aAAa,MAAM,IAAI,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE;AAC7C,cAAc,UAAU,CAAC,IAAI,gBAAa,IAAI,YAAO,GAAG,UAAM,CAAC;AAC/D,aAAa,MAAM;AACnB,cAAc,UAAU,CAAC,IAAI,mBAAgB,CAAC,WAAM,IAAI,4BAAuB,CAAC,YAAO,GAAG,UAAM,CAAC;AACjG,cAAc,CAAC,IAAI,CAAC,CAAC;AACrB,aAAa;AACb,WAAW,CAAC,CAAC;AACb;AACA,UAAU,IAAI,IAAI,QAAK,UAAU,CAAC,IAAI,CAAC,IAAI,EAAG,CAAC;AAC/C,SAAS;AACT;AACA;AACA,QAAQ,OAAO;AACf,gBAAU,IAAI;AACd,UAAU,GAAG,EAAE,EAAE,QAAQ,EAAE,EAAE,EAAE;AAC/B,SAAS,CAAC;AACV,OAAO;AACP,MAAM,OAAO,IAAI,CAAC;AAClB,KAAK;AACL,GAAG,CAAC;AACJ;;;;"}